<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이동 테스트</title>

    <script>

        var canvas;
        var context;

        var dx=0;
        var dy=0;

        var keycode;

        var imgChar=new Image();
        imgChar.src="./ㄷㄻ.png";
        var imgBg=new Image();
        imgBg.src="./배경.png";

        var x=200, y=250;
        var w=40, h=40;

        function loaded(){
            canvas= document.getElementById('c1');
            context=canvas.getContext('2d');

            runGame();
            setInterval(runGame,10);
        }

        function runGame(){
            moveAll();
            drawAll();
        }

        function moveAll(){
            x+=dx;
            y+=dy;
        }

        function drawAll(){
            context.drawImage(imgBg,0,0,400,500);
            context.drawImage(imgChar,x-w,y-h,w*2,h*2)

            context.fillStyle="white";
            context.font="30px sans-serif";
            context.fillText(keycode,10,40);
        }

        function keydown(){
            keycode=event.keyCode;
            switch(keycode){
                case 37: dx=-1; break; 
                case 38: dy=-1; break;
                case 39: dx=1; break;
                case 40: dy=1; break;
            }
        }
        function keyup(){
            keycode=event.keyCode;
            switch(keycode){
                case 37: dx=0; break;
                case 38: dy=0; break;
                case 39: dx=0; break;
                case 40: dy=0; break;
            }
        }
        var sd= new Audio('./32001.mp3');
        sd.volume= 1.0; //0.0 ~ 1.0
        sd.loof= true; //반복재생여부
        sd.play();

        

    </script>
</head>
<body onload="loaded()" onkeydown="keydown()" onkeyup="keyup()">
    <canvas width="400" height="500" style="border: 2px solid black;" id="c1"></canvas>
    <audio src="32001.mp3" controls autoplay loop />
</body>
</html>